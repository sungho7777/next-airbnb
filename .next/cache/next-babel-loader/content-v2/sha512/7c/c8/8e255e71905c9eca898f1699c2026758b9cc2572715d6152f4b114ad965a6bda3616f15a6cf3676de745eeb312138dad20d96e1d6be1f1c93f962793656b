{"ast":null,"code":"import _defineProperty from \"D:/SUNGHO/DEV/Next Class/next-airbnb/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"D:/SUNGHO/DEV/Next Class/next-airbnb/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/SUNGHO/DEV/Next Class/next-airbnb/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"D:\\\\SUNGHO\\\\DEV\\\\Next Class\\\\next-airbnb\\\\components\\\\auth\\\\LoginModal.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { useDispatch } from \"react-redux\";\n\nvar CloseXIcon = function CloseXIcon(props) {\n  return /*#__PURE__*/_jsxDEV(\"svg\", _objectSpread(_objectSpread({}, props), {}, {\n    children: /*#__PURE__*/_jsxDEV(\"path\", {\n      fillRule: \"evenodd\",\n      clipRule: \"evenodd\",\n      d: \"m7.667 7.217 6.55-6.55.45.45-6.55 6.55 6.55 6.55-.45.45-6.55-6.55-6.55 6.55-.45-.45 6.55-6.55-6.55-6.55.45-.45 6.55 6.55z\",\n      fill: \"#000\"\n    }, void 0, false, void 0, this)\n  }), void 0, false, void 0, this);\n};\n\n_c3 = CloseXIcon;\nCloseXIcon.defaultProps = {\n  width: \"15\",\n  height: \"15\",\n  fill: \"none\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n};\n\nvar MailIcon = function MailIcon(props) {\n  return /*#__PURE__*/_jsxDEV(\"svg\", _objectSpread(_objectSpread({}, props), {}, {\n    children: /*#__PURE__*/_jsxDEV(\"path\", {\n      d: \"M.306 0v13.5H22V0H.306zm5.987 5.947L2.114 10.23V3.137l4.179 2.81zM2.55 1.5h17.206l-8.603 5.785L2.55 1.5zm5.147 5.391 3.456 2.324 3.462-2.328L19.688 12H2.713l4.984-5.109zm8.323-.948 4.172-2.806v7.011L16.02 5.943z\",\n      fill: \"#222\"\n    }, void 0, false, void 0, this)\n  }), void 0, false, void 0, this);\n};\n\n_c4 = MailIcon;\nMailIcon.defaultProps = {\n  width: \"22\",\n  height: \"14\",\n  fill: \"none\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n};\n\nvar OpenedEyeIcon = function OpenedEyeIcon(props) {\n  return /*#__PURE__*/_jsxDEV(\"svg\", _objectSpread(_objectSpread({}, props), {}, {\n    children: [/*#__PURE__*/_jsxDEV(\"g\", {\n      clipPath: \"url(#a)\",\n      fill: \"#000\",\n      children: [/*#__PURE__*/_jsxDEV(\"path\", {\n        d: \"M15.941 7.81c-.126-.183-3.154-4.477-7.94-4.477-4.108 0-7.768 4.27-7.922 4.452a.335.335 0 0 0 0 .43c.154.182 3.814 4.452 7.921 4.452 4.108 0 7.768-4.27 7.922-4.452a.333.333 0 0 0 .019-.404zM8.001 12C4.707 12 1.576 8.86.78 8c.794-.86 3.922-4 7.22-4 3.852 0 6.571 3.135 7.235 3.982C14.47 8.815 11.321 12 8 12z\"\n      }, void 0, false, void 0, this), /*#__PURE__*/_jsxDEV(\"path\", {\n        d: \"M8 5.333A2.67 2.67 0 0 0 5.333 8 2.67 2.67 0 0 0 8 10.667 2.67 2.67 0 0 0 10.667 8 2.67 2.67 0 0 0 8 5.333zM8 10c-1.103 0-2-.897-2-2s.897-2 2-2 2 .897 2 2-.897 2-2 2z\"\n      }, void 0, false, void 0, this)]\n    }, void 0, true, void 0, this), /*#__PURE__*/_jsxDEV(\"defs\", {\n      children: /*#__PURE__*/_jsxDEV(\"clipPath\", {\n        id: \"a\",\n        children: /*#__PURE__*/_jsxDEV(\"path\", {\n          fill: \"#fff\",\n          d: \"M0 0h16v16H0z\"\n        }, void 0, false, void 0, this)\n      }, void 0, false, void 0, this)\n    }, void 0, false, void 0, this)]\n  }), void 0, true, void 0, this);\n};\n\n_c5 = OpenedEyeIcon;\nOpenedEyeIcon.defaultProps = {\n  width: \"16\",\n  height: \"16\",\n  fill: \"none\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n};\n\nvar ClosedEyeIcon = function ClosedEyeIcon(props) {\n  return /*#__PURE__*/_jsxDEV(\"svg\", _objectSpread(_objectSpread({}, props), {}, {\n    children: /*#__PURE__*/_jsxDEV(\"path\", {\n      d: \"M15.84 8.311a.449.449 0 0 1-.636-.054l-1.181-1.404A8.062 8.062 0 0 1 12.05 8.17l.674 1.634a.45.45 0 1 1-.834.344l-.674-1.634a9.843 9.843 0 0 1-2.893.527v1.745a.45.45 0 0 1-.902 0V9.041a9.945 9.945 0 0 1-2.669-.454l-.644 1.56a.451.451 0 1 1-.834-.343l.634-1.536a8.081 8.081 0 0 1-2.04-1.286L.797 8.257a.45.45 0 1 1-.69-.58L1.22 6.352C.413 5.475.07 4.704.037 4.629a.45.45 0 1 1 .828-.356c.03.07.382.845 1.223 1.683.012.008.024.015.035.024.03.025.054.054.076.084A7.241 7.241 0 0 0 4.63 7.587c.014.005.029.007.043.013l.016.009c.875.326 1.926.54 3.184.54 5.282 0 6.991-3.837 7.008-3.876a.45.45 0 1 1 .829.356c-.03.07-.34.762-1.053 1.578l1.237 1.469a.45.45 0 0 1-.055.635z\",\n      fill: \"#000\"\n    }, void 0, false, void 0, this)\n  }), void 0, false, void 0, this);\n};\n\n_c6 = ClosedEyeIcon;\nClosedEyeIcon.defaultProps = {\n  width: \"16\",\n  height: \"16\",\n  fill: \"none\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n};\nimport palette from \"../../styles/palette\";\nimport Button from \"../common/Button\";\nimport Input from \"../common/input\";\nimport { authActions } from \"../../store/auth\";\nimport { loginAPI } from \"../../lib/api/auth\";\nimport useValidateMode from \"../../hooks/useValidateMode\";\nimport { userActions } from \"../../store/user\";\nvar Container = styled.form.withConfig({\n  displayName: \"LoginModal__Container\",\n  componentId: \"sc-1jtfh77-0\"\n})([\"width:568px;padding:32px;background-color:white;z-index:11;.mordal-close-x-icon{cursor:pointer;display:block;margin:0 0 40px auto;}.login-input-wrapper{position:relative;margin-bottom:16px;}.login-password-input-wrapper{svg{cursor:pointer;}}.login-modal-submit-button-wrapper{margin-bottom:16px;padding-bottom:16px;border-bottom:1px solid \", \";}.login-modal-set-signup{color:\", \";margin-left:8px;cursor:pointer;}\"], palette.gray_eb, palette.dark_cyan);\n_c = Container;\n\nvar LoginModal = function LoginModal(_ref) {\n  _s();\n\n  var closeModal = _ref.closeModal;\n\n  var _useState = useState(\"\"),\n      email = _useState[0],\n      setEmail = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      password = _useState2[0],\n      setPassword = _useState2[1];\n\n  var dispatch = useDispatch();\n\n  var _useState3 = useState(true),\n      isPasswordHided = _useState3[0],\n      setIsPasswordHided = _useState3[1];\n\n  var _useValidateMode = useValidateMode(),\n      setValidateMode = _useValidateMode.setValidateMode; // * 비밀번호 숨김 토글하기\n\n\n  var togglePasswordHiding = function togglePasswordHiding() {\n    setIsPasswordHided(!isPasswordHided);\n  }; // * 이메일 주소 변경시\n\n\n  var onChangeEmail = function onChangeEmail(event) {\n    setEmail(event.target.value);\n  }; // * 비밀번호 변경시\n\n\n  var onChangePassword = function onChangePassword(event) {\n    setPassword(event.target.value);\n  }; // * 회원가입 모달로 변경하기\n\n\n  var changeToSignUpModal = function changeToSignUpModal() {\n    dispatch(authActions.setAuthMode(\"signup\"));\n  }; // * 로그인 클릭시\n\n\n  var onSubmitLogin = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n      var loginBody, _yield$loginAPI, data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault();\n              setValidateMode(true);\n\n              if (!(!email || !password)) {\n                _context.next = 6;\n                break;\n              }\n\n              alert(\"이메일과 비밀번호를 입력해 주세요.\");\n              _context.next = 20;\n              break;\n\n            case 6:\n              loginBody = {\n                email: email,\n                password: password\n              };\n              debugger;\n              _context.prev = 8;\n              _context.next = 11;\n              return loginAPI(loginBody);\n\n            case 11:\n              _yield$loginAPI = _context.sent;\n              data = _yield$loginAPI.data;\n              dispatch(userActions.setLoggedUser(data));\n              closeModal();\n              _context.next = 20;\n              break;\n\n            case 17:\n              _context.prev = 17;\n              _context.t0 = _context[\"catch\"](8);\n              console.log(_context.t0.response);\n\n            case 20:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[8, 17]]);\n    }));\n\n    return function onSubmitLogin(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    return function () {\n      setValidateMode(false);\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    onSubmit: onSubmitLogin,\n    children: [/*#__PURE__*/_jsxDEV(CloseXIcon, {\n      className: \"mordal-close-x-icon\",\n      onClick: closeModal\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-input-wrapper\",\n      children: /*#__PURE__*/_jsxDEV(Input, {\n        placeholder: \"\\uC774\\uBA54\\uC77C \\uC8FC\\uC18C\",\n        name: \"email\",\n        type: \"email\",\n        icon: /*#__PURE__*/_jsxDEV(MailIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 19\n        }, _this),\n        value: email,\n        onChange: onChangeEmail,\n        isValid: email !== \"\",\n        errorMessage: \"\\uC774\\uBA54\\uC77C\\uC774 \\uD544\\uC694\\uD569\\uB2C8\\uB2E4.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-input-wrapper login-password-input-wrapper\",\n      children: /*#__PURE__*/_jsxDEV(Input, {\n        placeholder: \"\\uBE44\\uBC00\\uBC88\\uD638 \\uC124\\uC815\\uD558\\uAE30\",\n        name: \"password\",\n        type: isPasswordHided ? \"password\" : \"text\",\n        icon: isPasswordHided ? /*#__PURE__*/_jsxDEV(ClosedEyeIcon, {\n          onClick: togglePasswordHiding\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 19\n        }, _this) : /*#__PURE__*/_jsxDEV(OpenedEyeIcon, {\n          onClick: togglePasswordHiding\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 19\n        }, _this),\n        value: password,\n        onChange: onChangePassword,\n        errorMessage: \"\\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uC785\\uB825\\uD558\\uC138\\uC694.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 11\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-modal-submit-button-wrapper\",\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        color: \"bittersweet\",\n        children: \"\\uB85C\\uADF8\\uC778\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 11\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 9\n    }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"\\uC774\\uBBF8 \\uC5D0\\uC5B4\\uBE44\\uC564\\uBE44 \\uACC4\\uC815\\uC774 \\uC788\\uB098\\uC694?\", /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"login-modal-set-signup\",\n        role: \"presentation\",\n        onClick: changeToSignUpModal,\n        children: \"\\uD68C\\uC6D0\\uAC00\\uC785\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 11\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 9\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 7\n  }, _this);\n};\n\n_s(LoginModal, \"AqY2rBZICOPh1aFu3myerhQmUCs=\", false, function () {\n  return [useDispatch, useValidateMode];\n});\n\n_c2 = LoginModal;\nexport default LoginModal;\n\nvar _c, _c2, _c3, _c4, _c5, _c6;\n\n$RefreshReg$(_c, \"Container\");\n$RefreshReg$(_c2, \"LoginModal\");\n$RefreshReg$(_c3, \"CloseXIcon\");\n$RefreshReg$(_c4, \"MailIcon\");\n$RefreshReg$(_c5, \"OpenedEyeIcon\");\n$RefreshReg$(_c6, \"ClosedEyeIcon\");","map":{"version":3,"sources":["D:/SUNGHO/DEV/Next Class/next-airbnb/components/auth/LoginModal.tsx"],"names":["React","useEffect","useState","styled","useDispatch","CloseXIcon","MailIcon","OpenedEyeIcon","ClosedEyeIcon","palette","Button","Input","authActions","loginAPI","useValidateMode","userActions","Container","form","gray_eb","dark_cyan","LoginModal","closeModal","email","setEmail","password","setPassword","dispatch","isPasswordHided","setIsPasswordHided","setValidateMode","togglePasswordHiding","onChangeEmail","event","target","value","onChangePassword","changeToSignUpModal","setAuthMode","onSubmitLogin","preventDefault","alert","loginBody","data","setLoggedUser","console","log","response"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport CloseXIcon from \"../../public/static/svg/modal/modal_colose_x_icon.svg\";\r\nimport MailIcon from \"../../public/static/svg/auth/mail.svg\";\r\nimport OpenedEyeIcon from \"../../public/static/svg/auth/opened_eye.svg\";\r\nimport ClosedEyeIcon from \"../../public/static/svg/auth/closed_eye.svg\";\r\nimport palette from \"../../styles/palette\";\r\nimport Button from \"../common/Button\";\r\nimport Input from \"../common/input\";\r\nimport { authActions } from \"../../store/auth\";\r\nimport { loginAPI } from \"../../lib/api/auth\";\r\nimport useValidateMode from \"../../hooks/useValidateMode\";\r\nimport { userActions } from \"../../store/user\";\r\n\r\nconst Container = styled.form`\r\n  width: 568px;\r\n  padding: 32px;\r\n  background-color: white;\r\n  z-index: 11;\r\n  .mordal-close-x-icon {\r\n    cursor: pointer;\r\n    display: block;\r\n    margin: 0 0 40px auto;\r\n  }\r\n  .login-input-wrapper {\r\n    position: relative;\r\n    margin-bottom: 16px;\r\n  }\r\n  .login-password-input-wrapper {\r\n    svg {\r\n      cursor: pointer;\r\n    }\r\n  }\r\n  .login-modal-submit-button-wrapper {\r\n    margin-bottom: 16px;\r\n    padding-bottom: 16px;\r\n    border-bottom: 1px solid ${palette.gray_eb};\r\n  }\r\n  .login-modal-set-signup {\r\n    color: ${palette.dark_cyan};\r\n    margin-left: 8px;\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\ninterface IProps {\r\n    closeModal: () => void;\r\n}\r\n\r\nconst LoginModal: React.FC<IProps> = ({ closeModal }) => {\r\n    const [email, setEmail] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    const dispatch = useDispatch();\r\n\r\n    const [isPasswordHided, setIsPasswordHided] = useState(true);\r\n\r\n    const { setValidateMode } = useValidateMode();\r\n\r\n    // * 비밀번호 숨김 토글하기\r\n    const togglePasswordHiding = () => {\r\n        setIsPasswordHided(!isPasswordHided);\r\n    };\r\n\r\n    // * 이메일 주소 변경시\r\n    const onChangeEmail = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        setEmail(event.target.value);\r\n    };\r\n\r\n    // * 비밀번호 변경시\r\n    const onChangePassword = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n        setPassword(event.target.value);\r\n    };\r\n\r\n    // * 회원가입 모달로 변경하기\r\n    const changeToSignUpModal = () => {\r\n        dispatch(authActions.setAuthMode(\"signup\"));\r\n    };\r\n\r\n    // * 로그인 클릭시\r\n    const onSubmitLogin = async (event: React.FormEvent<HTMLFormElement>) => {\r\n        event.preventDefault();\r\n        setValidateMode(true);\r\n\r\n        if (!email || !password) {\r\n            alert(\"이메일과 비밀번호를 입력해 주세요.\");\r\n        } else {\r\n            const loginBody = { email, password };\r\ndebugger;\r\n            try {\r\n                const { data } = await loginAPI(loginBody);\r\n                dispatch(userActions.setLoggedUser(data));\r\n                closeModal();\r\n            } catch (e) {\r\n                console.log(e.response);\r\n            }\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        return () => {\r\n          setValidateMode(false);\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n      <Container onSubmit={onSubmitLogin}>\r\n        <CloseXIcon className=\"mordal-close-x-icon\" onClick={closeModal} />\r\n        <div className=\"login-input-wrapper\">\r\n          <Input\r\n            placeholder=\"이메일 주소\"\r\n            name=\"email\"\r\n            type=\"email\"\r\n            icon={<MailIcon />}\r\n            value={email}\r\n            onChange={onChangeEmail}\r\n            isValid={email !== \"\"}\r\n            errorMessage=\"이메일이 필요합니다.\"\r\n          />\r\n        </div>\r\n        <div className=\"login-input-wrapper login-password-input-wrapper\">\r\n          <Input\r\n            placeholder=\"비밀번호 설정하기\"\r\n            name=\"password\"\r\n            type={isPasswordHided ? \"password\" : \"text\"}\r\n            icon={\r\n                isPasswordHided ? (\r\n                  <ClosedEyeIcon onClick={togglePasswordHiding} />\r\n                ) : (\r\n                  <OpenedEyeIcon onClick={togglePasswordHiding} />\r\n                )\r\n            }\r\n            value={password}\r\n            onChange={onChangePassword}\r\n            errorMessage=\"비밀번호를 입력하세요.\"\r\n          />\r\n        </div>\r\n        <div className=\"login-modal-submit-button-wrapper\">\r\n          <Button type=\"submit\" color=\"bittersweet\">\r\n            로그인\r\n          </Button>\r\n        </div>\r\n        <p>\r\n          이미 에어비앤비 계정이 있나요?\r\n          <span\r\n            className=\"login-modal-set-signup\"\r\n            role=\"presentation\"\r\n            onClick={changeToSignUpModal}\r\n          >\r\n            회원가입\r\n          </span>\r\n        </p>\r\n      </Container>\r\n    );\r\n};\r\n\r\nexport default LoginModal;"]},"metadata":{},"sourceType":"module"}